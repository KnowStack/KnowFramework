package com.didiglobal.logi.auvjob;


import com.baomidou.mybatisplus.generator.AutoGenerator;
import com.baomidou.mybatisplus.generator.config.DataSourceConfig;
import com.baomidou.mybatisplus.generator.config.GlobalConfig;
import com.baomidou.mybatisplus.generator.config.PackageConfig;
import com.baomidou.mybatisplus.generator.config.StrategyConfig;
import com.baomidou.mybatisplus.generator.config.TemplateConfig;
import com.baomidou.mybatisplus.generator.config.rules.NamingStrategy;
import com.baomidou.mybatisplus.generator.engine.FreemarkerTemplateEngine;

/**
 * author: konglingxu
 * Date: 2020/8/25
 * Time: 下午1:25
 */
public class MysqlCodeGenerator {

  public static void main(String[] args) {
    // 全局配置
    GlobalConfig gc = new GlobalConfig();
    final String projectPath = System.getProperty("user.dir");
    gc.setOutputDir(projectPath + "/auv-job/src/main/java");
    gc.setAuthor("dengshan");
    gc.setOpen(false);
    gc.setBaseResultMap(true);
    gc.setBaseColumnList(true);

    // 代码生成器
    AutoGenerator mpg = new AutoGenerator();
    mpg.setGlobalConfig(gc);

    // 数据源配置
    DataSourceConfig dsc = new DataSourceConfig();
    dsc.setUrl("jdbc:mysql://10.96.80.17:3306/auv_job?useUnicode=true"
        + "&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&useSSL=false");
    dsc.setDriverName("com.mysql.jdbc.Driver");
    dsc.setUsername("root");
    dsc.setPassword("liuwu_test_001");
    mpg.setDataSource(dsc);

    // 包配置
    final PackageConfig pc = new PackageConfig();
    pc.setParent("com.didiglobal.logi.auvjob");
    pc.setEntity("domain");
    mpg.setPackageInfo(pc);

    // 配置模板
    TemplateConfig templateConfig = new TemplateConfig();
    templateConfig.setEntity("templates/entity.java");
    templateConfig.setMapper("templates/mapper.java");
    templateConfig.setService("templates/service.java");
    templateConfig.setServiceImpl("templates/serviceImpl.java");
    templateConfig.setController("templates/controller.java");
    templateConfig.setXml("templates/mapper.xml");
    mpg.setTemplate(templateConfig);

    // 策略配置
    StrategyConfig strategy = new StrategyConfig();
    strategy.setNaming(NamingStrategy.underline_to_camel);
    strategy.setColumnNaming(NamingStrategy.underline_to_camel);
    strategy.setEntityLombokModel(true);
    strategy.setRestControllerStyle(true);
    strategy.setInclude(new String[] {"task_info"});
    strategy.setControllerMappingHyphenStyle(true);
    strategy.setTablePrefix(pc.getModuleName() + "_");
    mpg.setStrategy(strategy);
    mpg.setTemplateEngine(new FreemarkerTemplateEngine());
    mpg.execute();
  }

}
